{% extends "base.html" %}
{% block contenido %}
{% load widget_tweaks %}


<div class="right_col" role="main">
          <div class="">
            <div class="page-title">
              <div class="title_left">
                <h3>Registro Proyecto</h3>
              </div>         
            </div>
            <div class="clearfix"></div>
            <div class="row">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                
                  <div class="x_content">
                    <br />
                    <form id="demo-form2" data-parsley-validate class="form-horizontal form-label-left" method="post">
						{% csrf_token %}
                      <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Region<span class="required"></span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                          
                          <select class=" form-control col-md-7 col-xs-12" id="id_regiones" name="region">
                            <option value="" selected="selected">--- seleccionar---</option>
                            <option value="1">Metropolitana</option>
                            <option value="2">Vallez</option>
                            <option value="3">Tropico</option>
                            <option value="4">Cono sur</option>
                            <option value="5">Andina</option>
                          </select>
                          {% if form.errors.regiones %}
	                          <ul id="parsley-id-5" class="parsley-errors-list filled">
	                          	<li class="parsley-required">{{form.errors.regiones|removetags:'ul li'}}</li>
	                          </ul>
	                       {% endif %}

                        </div>
                      </div>

                      <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="last-name">Municipio<span class="required"></span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                          
                          <select class="form-control col-md-7 col-xs-12 {% if form.errors.municipios %}parsley-error{% endif %}" id="id_municipios" name="municipio">
                            <option value="">Seelecione el municipio</option>
                          </select>
                          {% if form.errors.municipios %}
                            <ul id="parsley-id-5" class="parsley-errors-list filled">
                              <li class="parsley-required">{{form.errors.municipios|removetags:'ul li'}}</li>
                            </ul>
                         {% endif %}

                        </div>
                      </div>

                      <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="last-name">Nombre Proyecto<span class="required"></span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                          {{form.nombre_proyecto|add_class:"form-control col-md-7 col-xs-12"|add_error_class:"parsley-error"}}
                          {% if form.errors.nombre_proyecto %}
                            <ul id="parsley-id-5" class="parsley-errors-list filled">
                              <li class="parsley-required">{{form.errors.nombre_proyecto|removetags:'ul li'}}</li>
                            </ul>
                         {% endif %}

                        </div>
                      </div>

                      <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="last-name">Responsable Proyecto<span class="required"></span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                          {{form.responsable_proyecto|add_class:"form-control col-md-7 col-xs-12"|add_error_class:"parsley-error"}}
                          {% if form.errors.responsable_proyecto %}
                            <ul id="parsley-id-5" class="parsley-errors-list filled">
                              <li class="parsley-required">{{form.errors.responsable_proyecto|removetags:'ul li'}}</li>
                            </ul>
                         {% endif %}

                        </div>
                      </div>

                      <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="last-name">Responsable Seguimiento<span class="required"></span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                          {{form.responsable_seguimiento|add_class:"form-control col-md-7 col-xs-12"|add_error_class:"parsley-error"}}
                          {% if form.errors.responsable_seguimiento %}
                            <ul id="parsley-id-5" class="parsley-errors-list filled">
                              <li class="parsley-required">{{form.errors.responsable_seguimiento|removetags:'ul li'}}</li>
                            </ul>
                         {% endif %}

                        </div>
                      </div>

                      <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Fecha de Inicio<span class="required"></span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                          
                          {{form.fecha_inicio|add_class:"form-control col-md-7 col-xs-12"|add_error_class:"parsley-error"}}
                          {% if form.errors.fecha_inicio %}
                            <ul id="parsley-id-5" class="parsley-errors-list filled">
                              <li class="parsley-required">{{form.errors.fecha_inicio|removetags:'ul li'}}</li>
                            </ul>
                         {% endif %}

                        </div>
                      </div>

                      <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Fecha de Conclucion<span class="required"></span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                          
                          {{form.fecha_conclucion|add_class:"form-control col-md-7 col-xs-12"|add_error_class:"parsley-error"}}
                          {% if form.errors.fecha_conclucion %}
                            <ul id="parsley-id-5" class="parsley-errors-list filled">
                              <li class="parsley-required">{{form.errors.fecha_conclucion|removetags:'ul li'}}</li>
                            </ul>
                         {% endif %}

                        </div>
                      </div>

                      <div class="ln_solid"></div>
                      <div class="form-group">
                        <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
                          <button type="submit" class="btn btn-primary">Cancelar</button>
                          <button type="submit" class="btn btn-success">Guardar</button>
                        </div>
                      </div>

                    </form>
                  </div>
                </div>
              </div>
            </div>

           

         



           
          </div>
        </div>


{% endblock %}
{% block js %}
	<script>
      
        


         $('#id_fecha_inicio').daterangepicker({
          singleDatePicker: true,
          calender_style: "picker_4",
          locale: {
            format: 'YYYY-MM-DD'
          },

        }, function(start, end, label) {
          console.log(start.toISOString(), end.toISOString(), label);
        });

        $('#id_fecha_conclucion').daterangepicker({
          singleDatePicker: true,
          calender_style: "picker_4",
          locale: {
            format: 'YYYY-MM-DD'
          }
        }, function(start, end, label) {
          console.log(start.toISOString(), end.toISOString(), label);
        });

        // if ($("#id_regiones").val() == ''){
          
        //   var options = $(this).data('options', $('#id_municipios option').clone());
        //   $('#id_municipios').html(options);
        // }else{
        //   alert('sss');
        // }

        // $("#id_municipios").hide();

        // $("#id_regiones").change(function() {
        //   if ($(this).data('options') == undefined) {
        //     /*Taking an array of all options-2 and kind of embedding it on the select1*/
        //     $(this).data('options', $('#id_municipios option').clone());
            
        //   }
        //   var id = $(this).val();
        //   var options = $(this).data('options').filter('[value=' + id + ']');
        //   $('#id_municipios').html(options);
        // });


        var Metropolitana = [
          {display: "Cochabamba", value: "cochabamba"},
          {display: "Colcapirhua", value: "Colcapirhua"},
          {display: "Quillacollo", value: "Quillacollo"},
          {display: "Sacaba", value: "Sacaba"},
          {display: "Sipe Sipe", value: "Sipe Sipe"},
          {display: "Vinto", value: "Vinto"}];

        var Vallez = [
          {display:"Punata", value:"Punata"},
          {display:"Capinota", value:"Capinota"},
          {display:"Santivañes", value:"Santivañes"},
          {display:"Arani", value:"Arani"},
          {display:"Villa Rivero", value:"Villa Rivero"},
          {display:"Cliza", value:"Cliza"},
          {display:"Toco", value:"Toco"},
          {display:"Tolata", value:"Tolata"},
          {display:"Tarata", value:"Tarata"},
          {display:"Anzaldo", value:"Anzaldo"},
          {display:"Sacabamba", value:"Sacabamba"},
          {display:"Arbieto", value:"Arbieto"},
          {display:"Tacahi", value:"Tacahi"},
          {display:"Villa Gualberto Villarroel", value:"Villa Gualberto Villarroel"},
          {display:"San Benito", value:"San Benito"}];

          var Tropico = [
          {display:"Punata", value:"Punata"},
          {display:"Entre Rios", value:"Entre Rios"},
          {display:"Shinahota", value:"Shinahota"},
          {display:"Colomi", value:"Colomi"},
          {display:"Puerto Villarroel", value:"Puerto Villarroel"},
          {display:"Villa Tunari", value:"Villa Tunari"},
          {display:"Chimore", value:"Chimore"}];

          var Conosur = [
          {display:"Vacas", value:"Vacas"},
          {display:"Tiraque", value:"Tiraque"},
          {display:"Alalay", value:"Alalay"},
          {display:"Mizque", value:"Mizque"},
          {display:"Aiquile", value:"Aiquile"},
          {display:"Vila Vila", value:"Vila Vila"},
          {display:"Pojo", value:"Pojo"},
          {display:"Omereque", value:"Omereque"},
          {display:"Totora", value:"Totora"},
          {display:"Pocona", value:"Pocona"},
          {display:"Pasorapa", value:"Pasorapa"}];

           var Andina = [
          {display:"Bolivar", value:"Bolivar"},
          {display:"Cocapata", value:"Cocapata"},
          {display:"independencia", value:"independencia"},
          {display:"Morochata", value:"Morochata"},
          {display:"Tapacari", value:"Tapacari"},
          {display:"Tacopaya", value:"Tacopaya"},
          {display:"Sicaya", value:"Sicaya"},
          {display:"Arque", value:"Arque"}];
         
        
            //If parent option is changed
        $("#id_regiones").change(function() {
                var parent = $(this).val(); //get option value from parent 

                switch(parent){ //using switch compare selected option and populate child
                        case '1':
                        list(Metropolitana);
                        break;  
                        case '2':
                        list(Vallez);
                        break;
                        case '3':
                        list(Tropico);
                        break;
                        case '4':
                        list(Conosur);
                        break;
                        case '5':
                        list(Andina);
                        break;
                    default: //default child option is blank
                        $("#id_municipios").html('');  
                        break;
                }
          });
          //function to populate child select box
          function list(array_list){
               //reset child options
              $("#id_municipios").html(""); 
              $(array_list).each(function (i) { //populate child options 
                  console.log(i);
         

              $("#id_municipios").append("<option value=\""+array_list[i].value+"\">"+array_list[i].display+"</option>");
             

              });
          }


          function municipio(array_list){

            $("#id_municipios").html(""); 
              $(array_list).each(function (i) { //populate child options 
         

              $("#id_municipios").append("<option value=\""+array_list[i].value+"\">"+array_list[i].display+"</option>");

              

              });

              $("#id_municipios option:selected").removeAttr("selected");

              $('#id_municipios option[value="{{form.municipio.value}}"]').attr("selected", "selected");

          }

          var region_data;

          {% if form.region.value == '1' %}
            region_data = Metropolitana
          {% endif %}

          {% if form.region.value == '2' %}
            region_data = Vallez
          {% endif %}

          {% if form.region.value == '3' %}
            region_data = Tropico
          {% endif %}

          {% if form.region.value == '4' %}
            region_data = Conosur
          {% endif %}

          {% if form.region.value == '5' %}
            region_data = Andina
          {% endif %}

          municipio(region_data);

          $('#id_regiones option:selected').removeAttr("selected");
          $('#id_regiones option[value="{{form.region.value}}"]').attr("selected", "selected");
        



    </script>
{% endblock js %}
